(window.webpackJsonp=window.webpackJsonp||[]).push([[149],{Xe6i:function(t,e,r){"use strict";var o=r("17x9"),s=r.n(o),n=r("q1tI"),i=r.n(n),a=r("fhzG"),c=r.n(a),l=r("/MKj"),p=r("TSYQ"),u=r.n(p),h=r("hhPA"),f=r.n(h),d=r("BzM2"),m=r("5BBx"),g=r("EVdn"),y=r.n(g),j=r("jdWZ"),b=r("JoHf"),S=f.a.createStore({init:function init(){this.listenToMany({onCheckAssessment:m.a.checkAssessment,onResetProject:m.a.resetProject}),this.listenTo(b.a.restore.completed,this.onResetProject.bind(this))},getInitialState:function getInitialState(t){this.allDone=!0,this.assessments=t.projectAssessments,this.projectSlug=t.projectSlug,this.projectId=t.projectId,this.courseSlug=t.courseSlug,this.revision=t.revision||"master",this.userProgress=t.userProgress.checklist,this.trackSubmit=t.trackSubmit,this.trackComplete=t.trackComplete;var e=!0,r=!1,o=void 0;try{for(var s,n=this.assessments[Symbol.iterator]();!(e=(s=n.next()).done);e=!0){var i=s.value,a=!0,c=!1,l=void 0;try{for(var p,u=i.tasks[Symbol.iterator]();!(a=(p=u.next()).done);a=!0){var h=p.value;h.done="true"===t.userProgress.checklist[h.task_key],h.done||(this.allDone=!1)}}catch(t){c=!0,l=t}finally{try{a||null==u.return||u.return()}finally{if(c)throw l}}}}catch(t){r=!0,o=t}finally{try{e||null==n.return||n.return()}finally{if(r)throw o}}return{assessments:this.assessments,allDone:this.allDone}},onCheckAssessment:function onCheckAssessment(t,e){var r=!1;void 0===this.userProgress[t]&&(r=!0,Object(j.b)("project","checklist_click",{project:this.projectSlug,skill:this.courseSlug,self_assessment:t}),this.trackSubmit({data:{project:this.projectSlug,skill:this.skillSlug,curriculum:this.skillSlug,self_assessment:t,submit_type:"project_checklist_submit"}})),this.userProgress[t]=e;var o=!0,s=!0,n=!1,i=void 0;try{for(var a,c=this.assessments[Symbol.iterator]();!(s=(a=c.next()).done);s=!0){var l=a.value,p=!0,u=!1,h=void 0;try{for(var f,d=l.tasks[Symbol.iterator]();!(p=(f=d.next()).done);p=!0){var m=f.value;m.task_key===t&&(m.done=e),m.done||(o=!1)}}catch(t){u=!0,h=t}finally{try{p||null==d.return||d.return()}finally{if(u)throw h}}}}catch(t){n=!0,i=t}finally{try{s||null==c.return||c.return()}finally{if(n)throw i}}o&&!this.allDone&&r&&this.trackComplete(),this.allDone=o,this._updateStore()},onResetProject:function onResetProject(){if(this.assessments){var t=!0,e=!1,r=void 0;try{for(var o,s=this.assessments[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var n=o.value,i=!0,a=!1,c=void 0;try{for(var l,p=n.tasks[Symbol.iterator]();!(i=(l=p.next()).done);i=!0){l.value.done=!1}}catch(t){a=!0,c=t}finally{try{i||null==p.return||p.return()}finally{if(a)throw c}}}}catch(t){e=!0,r=t}finally{try{t||null==s.return||s.return()}finally{if(e)throw r}}this.allDone=!1,this._updateStore()}},_updateStore:function _updateStore(){var t={},e=!0,r=!1,o=void 0;try{for(var s,n=this.assessments[Symbol.iterator]();!(e=(s=n.next()).done);e=!0){var i=s.value,a=!0,c=!1,l=void 0;try{for(var p,u=i.tasks[Symbol.iterator]();!(a=(p=u.next()).done);a=!0){var h=p.value;t[h.task_key]=h.done}}catch(t){c=!0,l=t}finally{try{a||null==u.return||u.return()}finally{if(c)throw l}}}}catch(t){r=!0,o=t}finally{try{e||null==n.return||n.return()}finally{if(r)throw o}}var f="/practice/self_assessment_checklist",d={id:this.projectSlug,course_id:this.courseSlug,r:this.revision,tasks:t};this.courseSlug||(f="/practice/content_item_self_assessment_checklist",d={project_id:this.projectId,tasks:t}),y.a.ajax({type:"POST",url:f,data:d}),this.trigger(this.assessments,this.allDone)}}),v=(r("Tt3L"),r("ANGy"),r("zSSe")),k=r("T2dD"),P=r("deUn"),w=r("a5nv"),_=r("/ar6"),C=(r("zSpj"),r("wiwL")),T=r("v/K4"),I=r("lSCD"),O=r.n(I),A=r("mwIZ"),x=r.n(A),D=r("rIqd"),R=r("sl/k"),E=r("eCi3"),M=r("dLar"),W=r("rsr4"),G=r("HpNv");function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(t){return typeof t}:function _typeof(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _defineProperties(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _possibleConstructorReturn(t,e){return!e||"object"!==_typeof(e)&&"function"!=typeof e?function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,e){return t.__proto__=e,t})(t,e)}var F=function(t){function ProjectFooter(){var t,e;!function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ProjectFooter);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=_possibleConstructorReturn(this,(t=_getPrototypeOf(ProjectFooter)).call.apply(t,[this].concat(o)))).state={disabled:!1,buttonText:"Up Next",showTooltip:!1},e.getAssessmentCount=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?e.props.tasks.filter(function(t){return t.done}).length:e.props.tasks.length},e.showTooltip=function(){e.setState({showTooltip:!0})},e.hideTooltip=function(){e.setState({showTooltip:!1})},e.projectComplete=function(){e.props.tasksComplete&&O()(e.props.onProjectComplete)&&e.props.onProjectComplete()},e}return function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}(ProjectFooter,i.a.Component),function _createClass(t,e,r){return e&&_defineProperties(t.prototype,e),r&&_defineProperties(t,r),t}(ProjectFooter,[{key:"render",value:function render(){var t,e=this.props,r=e.inGetHelpV2Feature,o=e.walkthroughYouTubeId;return!this.props.tasksComplete&&this.state.showTooltip&&(t=i.a.createElement(M.a,{style:{width:500}},i.a.createElement("p",null,i.a.createElement("strong",null,"Project in progress.")," Mark tasks as complete by checking them off in the left panel to finish."))),i.a.createElement(R.a,{currentType:"project",disabled:this.props.disabled,entityTitle:this.props.parentTitle,title:this.props.projectTitle,titleRoute:x()(this.props,"exitPaths.back"),project:this.props.project},i.a.createElement(R.b,{position:"center"},i.a.createElement("div",{className:"fcn-project-footer",onMouseOver:this.showTooltip,onMouseOut:this.hideTooltip},i.a.createElement(E.a,{total:this.getAssessmentCount(),complete:this.getAssessmentCount(!0)}),t,i.a.createElement(D.a,{theme:"yellow",disabled:!this.props.tasksComplete,onClick:this.projectComplete,style:{minWidth:"7rem"},"data-testid":"project-next"},this.state.buttonText))),i.a.createElement(R.b,{position:"right"},r?i.a.createElement(G.a,{inGetHelpV2Feature:r,isProject:!0,walkthroughYouTubeId:o}):i.a.createElement(W.a,{noun:"project",allowReset:!0,contentSlug:this.props.projectSlug,contentTitle:this.props.projectTitle,courseMeta:this.props.courseMeta||{}})))}}]),ProjectFooter}();F.propTypes={disabled:s.a.bool,exitPaths:s.a.object.isRequired,projectSlug:s.a.string.isRequired,projectTitle:s.a.string.isRequired,walkthroughYouTubeId:s.a.string,onProjectComplete:s.a.func,tasks:s.a.array,tasksComplete:s.a.bool.isRequired,courseMeta:s.a.object,project:s.a.object,parentTitle:s.a.string,inGetHelpV2Feature:s.a.bool};var B=F,H=r("R/yR"),N=r("ltiF"),L=r("cCeZ"),U={updateProgress:function updateProgress(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="/courses/".concat(this.props.courseSlug,"/projects/").concat(this.props.currentProject.slug,"/progress"),o={status:t,r:this.props.revision};this.props.courseSlug||(r="/practice/project_progress",o={project_id:this.props.currentProject.id,status:t,r:this.props.revision}),y.a.extend({success:function success(){},error:function error(){}},e),y.a.ajax({type:"POST",url:r,data:o,success:e.success,error:e.error})}},Y=r("HOuw"),V=r("zGzv"),q=r("kmE8"),z=r("NaN6");function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var J={showModal:r("ncDY").c,trackSubmit:k.e,trackComplete:k.b},Z=c()({displayName:"Projects",propTypes:{currentProject:s.a.object,currentProjectProgress:s.a.object,courseInMaintenanace:s.a.bool,profileImage:s.a.string,exitPaths:s.a.object,prerender:s.a.object,revision:s.a.string,hasButterbar:s.a.bool,interstitialItems:s.a.array,locationQuery:s.a.object,proData:s.a.object,redirectToContainerCourse:s.a.func.isRequired,isPro:s.a.bool,inComponentGridRewrite:s.a.bool,authorURL:s.a.string,isLintingDisabled:s.a.bool,course:s.a.object,programSlug:s.a.string,completeProject:s.a.func,trackSubmit:s.a.func,trackComplete:s.a.func,showModal:s.a.func,inGetHelpV2Feature:s.a.bool},mixins:P.a.concat([U,f.a.listenTo(S,"onSelfAssessmentChange"),d.StateMixin.connect(Y.a)]),onSelfAssessmentChange:function onSelfAssessmentChange(t,e){this.setState({selfAssessmentsDone:e,selfAssessments:t}),b.a.persist()},getInitialState:function getInitialState(){var t=this.props.course,e=S.getInitialState({userProgress:this.props.currentProjectProgress,projectAssessments:this.props.currentProject.projectInformation.self_assessments,projectSlug:this.props.currentProject.slug,courseSlug:t?t.slug:null,revision:this.props.revision,projectId:this.props.currentProject.id,trackSubmit:this.props.trackSubmit,trackComplete:this.props.trackComplete}),r={type:"Brief",objective:this.props.currentProject.projectInformation.objective},o=function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),o.forEach(function(e){_defineProperty(t,e,r[e])})}return t}({},this.props.currentProject.projectInformation.components,{Brief:r});return this.componentGrid=i.a.createRef(),{fileNavReady:!1,restoringFiles:!1,wall:null,components:o,selfAssessmentsDone:e.allDone,selfAssessments:e.assessments,progress:this.props.currentProjectProgress}},componentWillMount:function componentWillMount(){Y.a.setController(this),this.adapter=w.a.forProjectsWithComponents(this.state.components),this.adapter.controller=this,_.a.newAdapter(this.adapter)},componentDidMount:function componentDidMount(){this.updateWorkspace(),this.adapter.trigger("interface:ready"),this.adapter.extendCache()},componentDidUpdate:function componentDidUpdate(t,e){!e.workspaceIdle&&this.state.workspaceIdle&&this.props.showModal({type:"IdleWall"})},currentWorkspace:function currentWorkspace(){return this.props.currentProject.projectInformation.workspace},gridSetup:function gridSetup(t){0===this.state.progress.status&&void 0!==t.slots[25]&&t.expandSlotInDirection(25,"left")},updateWorkspace:function updateWorkspace(){var t=this;v.a.isAnon()||Object(V.a)({content:this.props.currentProject.projectInformation,userId:v.a.id()}).then(function(){t.adapter.trigger("godex:ready")}).catch(function(t){0})},componentsToHide:function componentsToHide(){return Object.keys(this.state.components).filter(function(t){return"Brief"!==t&&"WebBrowser"!==t})},revealComponents:function revealComponents(){if(!this.props.inComponentGridRewrite){var t=!0,e=!1,r=void 0;try{for(var o,s=this.componentsToHide()[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var n=o.value;this.componentGrid.current.wrappedInstance.expandSlotByName(n)}}catch(t){e=!0,r=t}finally{try{t||null==s.return||s.return()}finally{if(e)throw r}}this.setState({grid:this.state.grid})}},wall:function wall(){return v.a.isAnon()?null:this.props.courseInMaintenanace&&!v.a.isAdmin()?i.a.createElement(H.a,null,i.a.createElement(N.a,null)):this.state.wall?this.state.wall:null},initialSavepointSlug:function initialSavepointSlug(){return"".concat(this.props.currentProject.slug,"-initial")},finalSavepointSlug:function finalSavepointSlug(){return"".concat(this.props.currentProject.slug,"-final")},getWorkspaceSetupCommand:function getWorkspaceSetupCommand(){return null},clearWall:function clearWall(){this.setState({wall:null})},getSelfAssessmentTasks:function getSelfAssessmentTasks(){return(this.state.selfAssessments||[]).map(function(t){return t.tasks}).reduce(function(t,e){return t.concat(e)},[])},getWalkthroughYouTubeId:function getWalkthroughYouTubeId(){var t=this.props.currentProject;return t.projectInformation?t.projectInformation.walkthrough_youtube_id:null},render:function render(){var t=this.props,e=t.course,r=t.programSlug,o=t.inGetHelpV2Feature,s=r||(e?e.slug:""),n={componentShouldBeDisabled:this.componentShouldBeDisabled,positionCueSignal:this.positionCueSignal},a={readonly:!1,fileNavReady:!0,isProject:!0,disableLinting:this.props.isLintingDisabled,assessments:this.state.selfAssessments},c={progress:this.state.progress,wall:this.wall(),contentItemTitle:this.props.currentProject.title,contentParentTitle:e?e.title:"",bugReportData:{course:s,skill:this.props.currentProject.slug,backend:this.currentWorkspace().backend}},l=u()({"fcn-projects":!0,francine:!0,"francine--butterbar":this.props.hasButterbar});return i.a.createElement("div",{className:l,id:"workspace"},i.a.createElement(C.a,{exitPaths:this.props.exitPaths,title:e?e.title:this.props.currentProject.title,onAdminChange:this.handleAdminChange,workspace:this.currentWorkspace(),prerender:this.props.prerender,authorURL:this.props.authorURL,nolock:this.state.nolock,uploadSavepoints:this.state.uploadSavepoints,authoringMode:this.state.authoringMode,contentType:"project"}),this.discoveryCues(),this.props.inComponentGridRewrite?i.a.createElement(L.a,{components:this.state.components,adapter:this.adapter,modifiers:a,helpers:n,presenter:c,user:{isAnon:!1}}):i.a.createElement(T.a,{ref:this.componentGrid,components:this.state.components,adapter:this.adapter,helpers:n,modifiers:a,presenter:c,gridSetup:this.gridSetup,user:{isAnon:!1},contentItemType:"project"}),i.a.createElement(B,{disabled:this.componentShouldBeDisabled("Footer"),exitPaths:this.props.exitPaths,parentTitle:e?e.title:"",courseMeta:e?e.meta:{},projectSlug:this.props.currentProject.slug,projectTitle:this.props.currentProject.title,walkthroughYouTubeId:this.getWalkthroughYouTubeId(),tasks:this.getSelfAssessmentTasks(),tasksComplete:this.state.selfAssessmentsDone,title:this.props.currentProject.title,onProjectComplete:this.props.completeProject,project:this.props.currentProject,inGetHelpV2Feature:o}))}});e.a=Object(l.b)(function mapStateToProps(t){return{isPro:t.currentUser.isPro,inComponentGridRewrite:Object(q.a)(t).includes("component_grid_rewrite"),authorURL:Object(z.f)(t),inGetHelpV2Feature:Object(q.a)(t).includes("get_help_v2")}},J)(Z)}}]);
//# sourceMappingURL=149.8198eba4de2948f19eee.chunk.js.map